import{s as m,e as d,c as g,k as l,b as p,i as u,n,d as f,o as h}from"../chunks/scheduler.HaoJMjUf.js";import{S as w,i as v}from"../chunks/index.G81k-Xhd.js";import{W as x}from"../chunks/main.DlQOQXQP.js";import{g as _}from"../chunks/stores.6eYr0iPl.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.F8mDr4Rg.js";import{g as i}from"../chunks/entry.bxCKXrBO.js";function b(o){let t,a='<div class="grid grid-cols-2 w-4/5"></div> <p class="text-3xl text-warning-500">Under construction!</p>';return{c(){t=d("div"),t.innerHTML=a,this.h()},l(e){t=g(e,"DIV",{class:!0,"data-svelte-h":!0}),l(t)!=="svelte-1smz5iq"&&(t.innerHTML=a),this.h()},h(){p(t,"class","container")},m(e,r){u(e,t,r)},p:n,i:n,o:n,d(e){e&&f(t)}}}function S(o){const t=_();h(async()=>{Number.parseInt(sessionStorage.getItem("expiry")??"0")<Date.now()&&await i("/");let e=await a();e.absences,new Map(Object.entries(e.summary))});async function a(){const e={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},r=await fetch(`${x}/attendance`,e);let s=await r.text();if(r.status!=200){const c={message:`${s}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};throw t.trigger(c),await i("/grades"),new Error(s)}return JSON.parse(s)}return[]}class E extends w{constructor(t){super(),v(this,t,S,b,m,{})}}export{E as component};
