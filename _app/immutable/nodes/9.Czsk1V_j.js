import{s as Z,q as ee,e as $,r as D,t as y,c as C,a as z,u as q,v as I,d as w,w as P,b as S,i as T,g as o,x as te,y as ae,z as A}from"../chunks/scheduler.DG6l68wi.js";import{S as oe,i as le,b as se,c as K,a as M,m as N,t as G,d as J,e as Q}from"../chunks/index.DYfo6iJA.js";import{P as ne}from"../chunks/pageSelector.zrqkdHxh.js";import{W as re}from"../chunks/main.D8RZwWgc.js";import{g as ie}from"../chunks/stores.xujxmBFo.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CVYdIOV9.js";import{S as de}from"../chunks/SlideToggle.BuH3OPHl.js";function ce(p){let t;return{c(){t=y("Docs")},l(e){t=P(e,"Docs")},m(e,r){T(e,t,r)},d(e){e&&w(t)}}}function X(p){let t,e,r=p[0]?"30.0":"10.0",h,k,d,i,b=p[1].toFixed(1)+"",c,x,_=p[0]?"30.0":"10.0",g,l;return{c(){t=$("p"),e=y("Please allow up to "),h=y(r),k=y(" seconds for data to download!"),d=D(),i=$("p"),c=y(b),x=y("s / "),g=y(_),l=y("s")},l(s){t=C(s,"P",{});var n=z(t);e=P(n,"Please allow up to "),h=P(n,r),k=P(n," seconds for data to download!"),n.forEach(w),d=I(s),i=C(s,"P",{});var f=z(i);c=P(f,b),x=P(f,"s / "),g=P(f,_),l=P(f,"s"),f.forEach(w)},m(s,n){T(s,t,n),o(t,e),o(t,h),o(t,k),T(s,d,n),T(s,i,n),o(i,c),o(i,x),o(i,g),o(i,l)},p(s,n){n&1&&r!==(r=s[0]?"30.0":"10.0")&&A(h,r),n&2&&b!==(b=s[1].toFixed(1)+"")&&A(c,b),n&1&&_!==(_=s[0]?"30.0":"10.0")&&A(g,_)},d(s){s&&(w(t),w(d),w(i))}}}function fe(p){let t,e,r,h="Download all data",k,d,i="If you would like to download all of your student data in the readable json format, download them here!",b,c,x="Please extract zip file, or some folders may not show up",_,g,l,s,n,f,j,U,L,O,E,R,V,B;function Y(a){p[4](a)}let F={name:"cookie",active:"bg-gradient-to-r from-secondary-200 to-secondary-700",size:"sm",$$slots:{default:[ce]},$$scope:{ctx:p}};p[0]!==void 0&&(F.checked=p[0]),l=new de({props:F}),ee.push(()=>se(l,"checked",Y));let u=!p[2]&&X(p);return E=new ne({props:{classes:"select variant-ghost-primary",selected:"download data"}}),{c(){t=$("div"),e=$("div"),r=$("p"),r.textContent=h,k=D(),d=$("p"),d.textContent=i,b=D(),c=$("p"),c.textContent=x,_=D(),g=$("div"),K(l.$$.fragment),n=D(),f=$("button"),j=y("Download"),L=D(),u&&u.c(),O=D(),K(E.$$.fragment),this.h()},l(a){t=C(a,"DIV",{class:!0});var v=z(t);e=C(v,"DIV",{class:!0});var m=z(e);r=C(m,"P",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-e2ed69"&&(r.textContent=h),k=I(m),d=C(m,"P",{"data-svelte-h":!0}),q(d)!=="svelte-1m23a19"&&(d.textContent=i),b=I(m),c=C(m,"P",{"data-svelte-h":!0}),q(c)!=="svelte-1j204i6"&&(c.textContent=x),_=I(m),g=C(m,"DIV",{class:!0});var W=z(g);M(l.$$.fragment,W),W.forEach(w),n=I(m),f=C(m,"BUTTON",{type:!0,class:!0});var H=z(f);j=P(H,"Download"),H.forEach(w),L=I(m),u&&u.l(m),m.forEach(w),O=I(v),M(E.$$.fragment,v),v.forEach(w),this.h()},h(){S(r,"class","text-3xl"),S(g,"class","flex items-center justify-center space-x-2 w-full"),S(f,"type","button"),S(f,"class","btn login bg-gradient-to-br variant-gradient-primary-tertiary"),f.disabled=U=!p[2],S(e,"class","card p-4 text-token space-y-4 text-center max-w-4/5 w-4/5 md:1/3 lg:w-1/4 mt-10"),S(t,"class","container")},m(a,v){T(a,t,v),o(t,e),o(e,r),o(e,k),o(e,d),o(e,b),o(e,c),o(e,_),o(e,g),N(l,g,null),o(e,n),o(e,f),o(f,j),o(e,L),u&&u.m(e,null),o(t,O),N(E,t,null),R=!0,V||(B=te(f,"click",p[3]),V=!0)},p(a,[v]){const m={};v&64&&(m.$$scope={dirty:v,ctx:a}),!s&&v&1&&(s=!0,m.checked=a[0],ae(()=>s=!1)),l.$set(m),(!R||v&4&&U!==(U=!a[2]))&&(f.disabled=U),a[2]?u&&(u.d(1),u=null):u?u.p(a,v):(u=X(a),u.c(),u.m(e,null))},i(a){R||(G(l.$$.fragment,a),G(E.$$.fragment,a),R=!0)},o(a){J(l.$$.fragment,a),J(E.$$.fragment,a),R=!1},d(a){a&&w(t),Q(l),u&&u.d(),Q(E),V=!1,B()}}}function ue(p,t,e){const r=ie();let h=!1;async function k(){let c=setInterval(()=>{e(1,d+=.1)},100);e(2,i=!1);const x={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},_=await fetch(`${re}/cache?docs=${h}`,x);if(_.status!=200){const n={message:`${await _.text()}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};r.trigger(n),e(2,i=!0),e(1,d=0),clearInterval(c);return}var g=URL.createObjectURL(await _.blob());let l=document.createElement("a");l.href=g,l.download="my_student_info_2025.zip",l.innerHTML="Click here to download the file",l.click(),e(2,i=!0),e(1,d=0),clearInterval(c)}let d=0,i=!0;function b(c){h=c,e(0,h)}return[h,d,i,k,b]}class we extends oe{constructor(t){super(),le(this,t,ue,fe,Z,{})}}export{we as component};
