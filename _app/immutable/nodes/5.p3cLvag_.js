import{a as ne,e as u,b as P,c as p,d as b,h as f,i as D,j as m,u as oe,k as I,l as d,v as W,w as X,n as R,x as ae,r as ie,y as ce,t as k,f as S,z as de,m as z,A as fe,B as q,C as L}from"../chunks/scheduler.BgK5Tl8W.js";import{g as he}from"../chunks/globals.D0QH3NT1.js";import{e as M,u as _e,d as ue}from"../chunks/each.Bt99gS3h.js";import{S as pe,i as ge}from"../chunks/index.NEkLQFSy.js";import{g as me}from"../chunks/entry.BNszQ6d3.js";import{g as ve}from"../chunks/stores.BSME2v04.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.D45o3ZTf.js";const{Map:be}=he;function Y(o,e,r){const s=o.slice();return s[11]=e[r],s[10]=r,s}function Z(o,e,r){const s=o.slice();return s[8]=e[r],s[10]=r,s}function $(o,e,r){const s=o.slice();return s[13]=e[r],s[10]=r,s}function ee(o){let e,r="- current";return{c(){e=u("span"),e.textContent=r},l(s){e=p(s,"SPAN",{"data-svelte-h":!0}),q(e)!=="svelte-1xiodio"&&(e.textContent=r)},m(s,a){I(s,e,a)},d(s){s&&f(e)}}}function te(o){let e,r=o[13].name+"",s,a,l,t=o[10]===o[1]&&ee();return{c(){e=u("option"),s=k(r),a=P(),t&&t.c(),l=P(),this.h()},l(n){e=p(n,"OPTION",{});var i=b(e);s=S(i,r),a=D(i),t&&t.l(i),l=D(i),i.forEach(f),this.h()},h(){e.__value=o[10],de(e,e.__value)},m(n,i){I(n,e,i),d(e,s),d(e,a),t&&t.m(e,null),d(e,l)},p(n,i){i&1&&r!==(r=n[13].name+"")&&z(s,r),n[10]===n[1]?t||(t=ee(),t.c(),t.m(e,l)):t&&(t.d(1),t=null)},d(n){n&&f(e),t&&t.d()}}}function ke(o){let e=[],r=new be,s,a=M(o[0].classes);const l=t=>t[10];for(let t=0;t<a.length;t+=1){let n=Y(o,a,t),i=l(n);r.set(i,e[t]=se(i,n))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();s=L()},l(t){for(let n=0;n<e.length;n+=1)e[n].l(t);s=L()},m(t,n){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,n);I(t,s,n)},p(t,n){n&1&&(a=M(t[0].classes),e=_e(e,n,l,1,t,a,r,s.parentNode,ue,se,s,Y))},d(t){t&&f(s);for(let n=0;n<e.length;n+=1)e[n].d(t)}}}function Se(o){let e,r=M({length:o[0].classes.length==0?7:o[0].classes.length}),s=[];for(let a=0;a<r.length;a+=1)s[a]=re(Z(o,r,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=L()},l(a){for(let l=0;l<s.length;l+=1)s[l].l(a);e=L()},m(a,l){for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(a,l);I(a,e,l)},p(a,l){if(l&1){r=M({length:a[0].classes.length==0?7:a[0].classes.length});let t;for(t=0;t<r.length;t+=1){const n=Z(a,r,t);s[t]?s[t].p(n,l):(s[t]=re(),s[t].c(),s[t].m(e.parentNode,e))}for(;t<s.length;t+=1)s[t].d(1);s.length=r.length}},d(a){a&&f(e),ae(s,a)}}}function xe(o){let e,r=o[11].grade+"",s,a,l=o[11].letter_grade+"",t;return{c(){e=u("span"),s=k(r),a=k("% - "),t=k(l),this.h()},l(n){e=p(n,"SPAN",{class:!0});var i=b(e);s=S(i,r),a=S(i,"% - "),t=S(i,l),i.forEach(f),this.h()},h(){m(e,"class","text-3xl")},m(n,i){I(n,e,i),d(e,s),d(e,a),d(e,t)},p(n,i){i&1&&r!==(r=n[11].grade+"")&&z(s,r),i&1&&l!==(l=n[11].letter_grade+"")&&z(t,l)},d(n){n&&f(e)}}}function we(o){let e,r=o[11].grade+"",s,a;return{c(){e=u("span"),s=k(r),a=k("% - E"),this.h()},l(l){e=p(l,"SPAN",{class:!0});var t=b(e);s=S(t,r),a=S(t,"% - E"),t.forEach(f),this.h()},h(){m(e,"class","text-3xl bg-gradient-to-t bg-clip-text text-transparent box-decoration-clone from-error-300 to-error-700")},m(l,t){I(l,e,t),d(e,s),d(e,a)},p(l,t){t&1&&r!==(r=l[11].grade+"")&&z(s,r)},d(l){l&&f(e)}}}function Ie(o){let e,r=o[11].grade+"",s,a;return{c(){e=u("span"),s=k(r),a=k("% - D"),this.h()},l(l){e=p(l,"SPAN",{class:!0});var t=b(e);s=S(t,r),a=S(t,"% - D"),t.forEach(f),this.h()},h(){m(e,"class","text-3xl bg-gradient-to-t bg-clip-text text-transparent box-decoration-clone from-error-400 to-warning-600")},m(l,t){I(l,e,t),d(e,s),d(e,a)},p(l,t){t&1&&r!==(r=l[11].grade+"")&&z(s,r)},d(l){l&&f(e)}}}function ye(o){let e,r=o[11].grade+"",s,a;return{c(){e=u("span"),s=k(r),a=k("% - C"),this.h()},l(l){e=p(l,"SPAN",{class:!0});var t=b(e);s=S(t,r),a=S(t,"% - C"),t.forEach(f),this.h()},h(){m(e,"class","text-3xl bg-gradient-to-t bg-clip-text text-transparent box-decoration-clone from-warning-400 to-warning-600")},m(l,t){I(l,e,t),d(e,s),d(e,a)},p(l,t){t&1&&r!==(r=l[11].grade+"")&&z(s,r)},d(l){l&&f(e)}}}function Ee(o){let e,r=o[11].grade+"",s,a;return{c(){e=u("span"),s=k(r),a=k("% - B"),this.h()},l(l){e=p(l,"SPAN",{class:!0});var t=b(e);s=S(t,r),a=S(t,"% - B"),t.forEach(f),this.h()},h(){m(e,"class","text-3xl bg-gradient-to-t bg-clip-text text-transparent box-decoration-clone from-warning-400 to-success-600")},m(l,t){I(l,e,t),d(e,s),d(e,a)},p(l,t){t&1&&r!==(r=l[11].grade+"")&&z(s,r)},d(l){l&&f(e)}}}function Ne(o){let e,r=o[11].grade+"",s,a;return{c(){e=u("span"),s=k(r),a=k("% - A"),this.h()},l(l){e=p(l,"SPAN",{class:!0});var t=b(e);s=S(t,r),a=S(t,"% - A"),t.forEach(f),this.h()},h(){m(e,"class","text-3xl bg-gradient-to-t bg-clip-text text-transparent box-decoration-clone from-success-400 to-success-600")},m(l,t){I(l,e,t),d(e,s),d(e,a)},p(l,t){t&1&&r!==(r=l[11].grade+"")&&z(s,r)},d(l){l&&f(e)}}}function se(o,e){let r,s,a,l=le(e[11].name)+"",t,n,i,y,h,C=e[11].teacher+"",E,g,c,v,_,V,N,O,G="View",J,H;function U(x,w){return x[11].letter_grade=="A"?Ne:x[11].letter_grade=="B"?Ee:x[11].letter_grade=="C"?ye:x[11].letter_grade=="D"?Ie:x[11].letter_grade=="E"?we:xe}let j=U(e),A=j(e);return{key:o,first:null,c(){r=u("div"),s=u("div"),a=u("span"),t=k(l),n=P(),i=u("br"),y=P(),h=u("span"),E=k(C),g=P(),c=u("div"),A.c(),v=P(),_=u("br"),V=P(),N=u("a"),O=u("button"),O.textContent=G,H=P(),this.h()},l(x){r=p(x,"DIV",{class:!0});var w=b(r);s=p(w,"DIV",{class:!0});var T=b(s);a=p(T,"SPAN",{class:!0});var F=b(a);t=S(F,l),F.forEach(f),n=D(T),i=p(T,"BR",{}),y=D(T),h=p(T,"SPAN",{class:!0});var K=b(h);E=S(K,C),K.forEach(f),T.forEach(f),g=D(w),c=p(w,"DIV",{class:!0});var B=b(c);A.l(B),v=D(B),_=p(B,"BR",{}),V=D(B),N=p(B,"A",{href:!0});var Q=b(N);O=p(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),q(O)!=="svelte-1x6mmyt"&&(O.textContent=G),Q.forEach(f),B.forEach(f),H=D(w),w.forEach(f),this.h()},h(){m(a,"class","text-xl"),m(h,"class","text-l"),m(s,"class","flex50 block pl-3 svelte-1e6zu7p"),m(O,"class","btn bg-gradient-to-br variant-gradient-primary-tertiary mr-2 mt-2"),m(N,"href",J="/classView/"+e[10]),m(c,"class","flex50 block pr-3 text-right svelte-1e6zu7p"),m(r,"class","card gradecard p-1 svelte-1e6zu7p"),this.first=r},m(x,w){I(x,r,w),d(r,s),d(s,a),d(a,t),d(s,n),d(s,i),d(s,y),d(s,h),d(h,E),d(r,g),d(r,c),A.m(c,null),d(c,v),d(c,_),d(c,V),d(c,N),d(N,O),d(r,H)},p(x,w){e=x,w&1&&l!==(l=le(e[11].name)+"")&&z(t,l),w&1&&C!==(C=e[11].teacher+"")&&z(E,C),j===(j=U(e))&&A?A.p(e,w):(A.d(1),A=j(e),A&&(A.c(),A.m(c,v))),w&1&&J!==(J="/classView/"+e[10])&&m(N,"href",J)},d(x){x&&f(r),A.d()}}}function re(o){let e,r='<div class="flex50 block pl-3 pt-1 svelte-1e6zu7p"><div class="h-2.5 rounded-lg bg-gray-700 w-24 md:w-48"></div> <br/> <div class="h-2.5 rounded-lg bg-gray-600 w-16 md:w-32"></div></div> <div class="flex50 pr-3 pt-1 flex items-end flex-col svelte-1e6zu7p"><div class="h-2.5 rounded-lg bg-gray-700 w-28 md:w-48"></div> <br/> <div class="h-5 rounded-lg bg-gray-600 w-20 mr-2 mt-2 md:w-30"></div></div> ';return{c(){e=u("div"),e.innerHTML=r,this.h()},l(s){e=p(s,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-sbkri4"&&(e.innerHTML=r),this.h()},h(){m(e,"class","card gradecard placeholder animate-pulse p-2 svelte-1e6zu7p")},m(s,a){I(s,e,a)},p:R,d(s){s&&f(e)}}}function Ae(o){let e,r,s,a,l,t,n,i,y=M(o[0].reporting_periods),h=[];for(let c=0;c<y.length;c+=1)h[c]=te($(o,y,c));function C(c,v){return c[3]?Se:ke}let E=C(o),g=E(o);return{c(){e=u("div"),r=u("div"),s=u("div"),a=P(),l=u("select");for(let c=0;c<h.length;c+=1)h[c].c();t=P(),g.c(),this.h()},l(c){e=p(c,"DIV",{class:!0});var v=b(e);r=p(v,"DIV",{class:!0});var _=b(r);s=p(_,"DIV",{}),b(s).forEach(f),a=D(_),l=p(_,"SELECT",{class:!0});var V=b(l);for(let N=0;N<h.length;N+=1)h[N].l(V);V.forEach(f),_.forEach(f),t=D(v),g.l(v),v.forEach(f),this.h()},h(){m(l,"class","select variant-ghost-primary selector justify-self-end mr-5 svelte-1e6zu7p"),o[2]===void 0&&oe(()=>o[5].call(l)),m(r,"class","grid grid-cols-2 w-4/5"),m(e,"class","container")},m(c,v){I(c,e,v),d(e,r),d(r,s),d(r,a),d(r,l);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(l,null);W(l,o[2],!0),d(e,t),g.m(e,null),n||(i=[X(l,"change",o[5]),X(l,"change",o[4])],n=!0)},p(c,[v]){if(v&3){y=M(c[0].reporting_periods);let _;for(_=0;_<y.length;_+=1){const V=$(c,y,_);h[_]?h[_].p(V,v):(h[_]=te(V),h[_].c(),h[_].m(l,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=y.length}v&4&&W(l,c[2]),E===(E=C(c))&&g?g.p(c,v):(g.d(1),g=E(c),g&&(g.c(),g.m(e,null)))},i:R,o:R,d(c){c&&f(e),ae(h,c),g.d(),n=!1,ie(i)}}}function le(o){return o.split("(")[0].trim()}function Ce(o,e,r){const s=ve();let a={classes:[],report_period:0,reporting_periods:[]},l=0,t,n=new Map,i=!1;async function y(){if(n.has(t)){r(0,a=n.get(t)),sessionStorage.setItem("data",JSON.stringify(a));return}r(3,i=!0);const C={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:sessionStorage.getItem("name"),pass:sessionStorage.getItem("pass")})},E=await fetch(`https://worker-rust.zillorz.workers.dev/getGradeData/${t}`,C);let g=await E.text();if(E.status!=200){const c={message:`Error loading ${a.reporting_periods[t].name}: ${g}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};throw r(0,a=n.get(l)),r(3,i=!1),r(2,t=l),s.trigger(c),new Error(g)}r(0,a=JSON.parse(g)),r(3,i=!1),sessionStorage.setItem("data",g),n.set(t,a)}ce(async()=>{(sessionStorage.getItem("data")===null||Number.parseInt(sessionStorage.getItem("expiry")??"0")<Date.now())&&await me("/"),r(0,a=JSON.parse(sessionStorage.getItem("data"))),sessionStorage.getItem("cidx")===null?sessionStorage.setItem("cidx",""+a.report_period):Number.parseInt(sessionStorage.getItem("cidx"))!=a.report_period&&n.set(Number.parseInt(sessionStorage.getItem("cidx")),JSON.parse(sessionStorage.getItem("cdata"))),r(1,l=Number.parseInt(sessionStorage.getItem("cidx"))),r(2,t=a.report_period),n.set(t,a)});function h(){t=fe(this),r(2,t)}return[a,l,t,i,y,h]}class Me extends pe{constructor(e){super(),ge(this,e,Ce,Ae,ne,{})}}export{Me as component};
