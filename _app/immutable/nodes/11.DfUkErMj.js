import{s as ne,e as v,r as A,c as g,a as k,d as p,v as C,b as E,U as oe,i as D,g as f,_ as K,x as Y,Y as U,C as ie,T as ce,t as P,w as y,S as F,z as R,$ as de,u as ae,L as q,n as re}from"../chunks/scheduler.DG6l68wi.js";import{h as G,u as fe}from"../chunks/await_block.exjUfyNZ.js";import{e as O}from"../chunks/each.C9iv_aTT.js";import{S as ue,i as he,c as _e,a as pe,m as me,t as ve,d as ge,e as be}from"../chunks/index.DYfo6iJA.js";import{g as Q}from"../chunks/entry.C2cs8Lu9.js";import{P as ke}from"../chunks/pageSelector.zrqkdHxh.js";import{W as we}from"../chunks/main.D8RZwWgc.js";import{g as Ee}from"../chunks/stores.xujxmBFo.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CVYdIOV9.js";function X(r,e,s){const t=r.slice();return t[12]=e[s],t}function Se(r,e,s){const t=r.slice();return t[8]=e[s],t}function Z(r,e,s){const t=r.slice();return t[16]=e[s],t}function ee(r){let e,s="- current";return{c(){e=v("span"),e.textContent=s},l(t){e=g(t,"SPAN",{"data-svelte-h":!0}),ae(e)!=="svelte-1xiodio"&&(e.textContent=s)},m(t,l){D(t,e,l)},d(t){t&&p(e)}}}function te(r){let e,s=r[16]+"",t,l,n,a,i=r[16]==r[1]&&ee();return{c(){e=v("option"),t=P(s),l=A(),i&&i.c(),n=A(),this.h()},l(o){e=g(o,"OPTION",{});var c=k(e);t=y(c,s),l=C(c),i&&i.l(c),n=C(c),c.forEach(p),this.h()},h(){e.__value=a=r[16],F(e,e.__value)},m(o,c){D(o,e,c),f(e,t),f(e,l),i&&i.m(e,null),f(e,n)},p(o,c){c&4&&s!==(s=o[16]+"")&&R(t,s),o[16]==o[1]?i||(i=ee(),i.c(),i.m(e,n)):i&&(i.d(1),i=null),c&4&&a!==(a=o[16])&&(e.__value=a,F(e,e.__value))},d(o){o&&p(e),i&&i.d()}}}function Pe(r){let e,s=r[15]+"",t;return{c(){e=v("p"),t=P(s),this.h()},l(l){e=g(l,"P",{class:!0});var n=k(e);t=y(n,s),n.forEach(p),this.h()},h(){E(e,"class","text-3xl text-error-500")},m(l,n){D(l,e,n),f(e,t)},p(l,n){n&1&&s!==(s=l[15]+"")&&R(t,s)},d(l){l&&p(e)}}}function ye(r){let e,s=O(se(r[11].classes)),t=[];for(let l=0;l<s.length;l+=1)t[l]=le(X(r,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=q()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);e=q()},m(l,n){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,n);D(l,e,n)},p(l,n){if(n&1){s=O(se(l[11].classes));let a;for(a=0;a<s.length;a+=1){const i=X(l,s,a);t[a]?t[a].p(i,n):(t[a]=le(i),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},d(l){l&&p(e),U(t,l)}}}function Ie(r){let e,s=r[12].start_time+"",t,l,n=r[12].end_time+"",a;return{c(){e=v("p"),t=P(s),l=P(" - "),a=P(n),this.h()},l(i){e=g(i,"P",{class:!0});var o=k(e);t=y(o,s),l=y(o," - "),a=y(o,n),o.forEach(p),this.h()},h(){E(e,"class","text-2xl")},m(i,o){D(i,e,o),f(e,t),f(e,l),f(e,a)},p(i,o){o&1&&s!==(s=i[12].start_time+"")&&R(t,s),o&1&&n!==(n=i[12].end_time+"")&&R(a,n)},d(i){i&&p(e)}}}function Te(r){let e,s,t=r[12].period.includes("-")?"s":"",l,n,a=r[12].period+"",i;return{c(){e=v("p"),s=P("Period"),l=P(t),n=A(),i=P(a),this.h()},l(o){e=g(o,"P",{class:!0});var c=k(e);s=y(c,"Period"),l=y(c,t),n=C(c),i=y(c,a),c.forEach(p),this.h()},h(){E(e,"class","text-2xl")},m(o,c){D(o,e,c),f(e,s),f(e,l),f(e,n),f(e,i)},p(o,c){c&1&&t!==(t=o[12].period.includes("-")?"s":"")&&R(l,t),c&1&&a!==(a=o[12].period+"")&&R(i,a)},d(o){o&&p(e)}}}function le(r){let e,s,t,l=r[12].name+"",n,a,i,o,c,I=r[12].teacher+"",T,S,d,_,h,m,u,N,V=r[12].room+"",x,z;function W(b,w){return b[12].start_time==null||b[12].end_time==null?Te:Ie}let B=W(r),$=B(r);return{c(){e=v("div"),s=v("div"),t=v("span"),n=P(l),a=A(),i=v("br"),o=A(),c=v("span"),T=P(I),S=A(),d=v("div"),$.c(),_=A(),h=v("br"),m=A(),u=v("p"),N=P("Room: "),x=P(V),z=A(),this.h()},l(b){e=g(b,"DIV",{class:!0});var w=k(e);s=g(w,"DIV",{class:!0});var L=k(s);t=g(L,"SPAN",{class:!0});var j=k(t);n=y(j,l),j.forEach(p),a=C(L),i=g(L,"BR",{}),o=C(L),c=g(L,"SPAN",{class:!0});var J=k(c);T=y(J,I),J.forEach(p),L.forEach(p),S=C(w),d=g(w,"DIV",{class:!0});var M=k(d);$.l(M),_=C(M),h=g(M,"BR",{}),m=C(M),u=g(M,"P",{class:!0});var H=k(u);N=y(H,"Room: "),x=y(H,V),H.forEach(p),M.forEach(p),z=C(w),w.forEach(p),this.h()},h(){E(t,"class","text-2xl"),E(c,"class","text-lg"),E(s,"class","flex50 block pl-3 svelte-spalkl"),E(u,"class","text-lg"),E(d,"class","flex50 block pr-3 text-right svelte-spalkl"),E(e,"class","card gradecard p-1 svelte-spalkl")},m(b,w){D(b,e,w),f(e,s),f(s,t),f(t,n),f(s,a),f(s,i),f(s,o),f(s,c),f(c,T),f(e,S),f(e,d),$.m(d,null),f(d,_),f(d,h),f(d,m),f(d,u),f(u,N),f(u,x),f(e,z)},p(b,w){w&1&&l!==(l=b[12].name+"")&&R(n,l),w&1&&I!==(I=b[12].teacher+"")&&R(T,I),B===(B=W(b))&&$?$.p(b,w):($.d(1),$=B(b),$&&($.c(),$.m(d,_))),w&1&&V!==(V=b[12].room+"")&&R(x,V)},d(b){b&&p(e),$.d()}}}function $e(r){let e,s=O({length:8}),t=[];for(let l=0;l<s.length;l+=1)t[l]=Ae(Se(r,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=q()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);e=q()},m(l,n){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,n);D(l,e,n)},p:re,d(l){l&&p(e),U(t,l)}}}function Ae(r){let e,s='<div class="flex50 block pl-3 pt-1 svelte-spalkl"><div class="h-2.5 rounded-lg bg-gray-700 w-24 md:w-48"></div> <br/> <div class="h-2.5 rounded-lg bg-gray-600 w-16 md:w-32"></div></div> <div class="flex50 pr-3 pt-1 flex items-end flex-col svelte-spalkl"><div class="h-2.5 rounded-lg bg-gray-700 w-28 md:w-48"></div> <br/> <div class="h-5 rounded-lg bg-gray-600 w-20 mr-2 mt-2 md:w-30"></div></div> ';return{c(){e=v("div"),e.innerHTML=s,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1q98nla"&&(e.innerHTML=s),this.h()},h(){E(e,"class","card gradecard placeholder animate-pulse p-2 svelte-spalkl")},m(t,l){D(t,e,l)},p:re,d(t){t&&p(e)}}}function Ce(r){let e,s,t,l,n,a,i,o,c,I,T;l=new ke({props:{classes:"select variant-ghost-primary",selected:"schedule"}});let S=O(r[2]),d=[];for(let h=0;h<S.length;h+=1)d[h]=te(Z(r,S,h));let _={ctx:r,current:null,token:null,hasCatch:!0,pending:$e,then:ye,catch:Pe,value:11,error:15};return G(o=r[0],_),{c(){e=v("div"),s=v("div"),t=v("div"),_e(l.$$.fragment),n=A(),a=v("select");for(let h=0;h<d.length;h+=1)d[h].c();i=A(),_.block.c(),this.h()},l(h){e=g(h,"DIV",{class:!0});var m=k(e);s=g(m,"DIV",{class:!0});var u=k(s);t=g(u,"DIV",{});var N=k(t);pe(l.$$.fragment,N),N.forEach(p),n=C(u),a=g(u,"SELECT",{class:!0});var V=k(a);for(let x=0;x<d.length;x+=1)d[x].l(V);V.forEach(p),u.forEach(p),i=C(m),_.block.l(m),m.forEach(p),this.h()},h(){E(a,"class","select variant-ghost-primary selector justify-self-end svelte-spalkl"),r[1]===void 0&&oe(()=>r[4].call(a)),E(s,"class","grid grid-cols-2 w-4/5"),E(e,"class","container")},m(h,m){D(h,e,m),f(e,s),f(s,t),me(l,t,null),f(s,n),f(s,a);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(a,null);K(a,r[1],!0),f(e,i),_.block.m(e,_.anchor=null),_.mount=()=>e,_.anchor=null,c=!0,I||(T=[Y(a,"change",r[4]),Y(a,"change",r[3])],I=!0)},p(h,[m]){if(r=h,m&6){S=O(r[2]);let u;for(u=0;u<S.length;u+=1){const N=Z(r,S,u);d[u]?d[u].p(N,m):(d[u]=te(N),d[u].c(),d[u].m(a,null))}for(;u<d.length;u+=1)d[u].d(1);d.length=S.length}m&6&&K(a,r[1]),_.ctx=r,m&1&&o!==(o=r[0])&&G(o,_)||fe(_,r,m)},i(h){c||(ve(l.$$.fragment,h),c=!0)},o(h){ge(l.$$.fragment,h),c=!1},d(h){h&&p(e),be(l),U(d,h),_.block.d(),_.token=null,_=null,I=!1,ie(T)}}}function se(r){return r.filter(e=>(e.start_time!="12:00 AM"||e.end_time!="12:00 AM")&&e.period!="0"&&e.name!="Abbrev Schedule")}function De(r,e,s){const t=Ee();ce(async()=>{Number.parseInt(sessionStorage.getItem("expiry")??"0")<Date.now()&&await Q("/")});let l=n(null);async function n(T){const S={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},d=await fetch(`${we}/schedule${T!==null?"?term_index="+T:""}`,S);if(d.headers.has("set-token")&&sessionStorage.setItem("token",d.headers.get("set-token")),d.status!=200){let h=await d.text();const m={message:`${h}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};throw t.trigger(m),await Q("/grades"),new Error(h)}let _=JSON.parse(await d.text());return T===null&&(i=_.term_index,s(2,c=i==-1?[..._.terms,"Today"]:_.terms)),console.debug(_),_}async function a(){o=="Today"?s(0,l=n(-1)):s(0,l=n(c.indexOf(o)))}let i=-1,o="Today",c=["Today"];function I(){o=de(this),s(1,o),s(2,c)}return[l,o,c,a,I]}class ze extends ue{constructor(e){super(),he(this,e,De,Ce,ne,{})}}export{ze as component};
