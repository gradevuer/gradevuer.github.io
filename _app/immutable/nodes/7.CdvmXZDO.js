import{s as Q,l as X,e as v,m as P,t as R,c as k,a as I,k as K,p as x,d as _,q as T,b as w,i as U,g as m,r as Y,u as Z,v as N}from"../chunks/scheduler.DMWpDARK.js";import{S as ee,i as te,b as ae,c as O,a as V,m as q,t as D,d as J,e as W}from"../chunks/index.BR94DFz2.js";import"../chunks/entry.D0yI4M1N.js";import{P as se}from"../chunks/pageSelector.66qLVHhQ.js";import{W as le}from"../chunks/main.DlQOQXQP.js";import{g as oe}from"../chunks/stores.Ckxyyx8M.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Q42aMCKc.js";import{S as ne}from"../chunks/SlideToggle.D7rq-FRo.js";function re(n){let t=n[0]?"Json format (human readable)":"Msgpack format (Future compatible)",e;return{c(){e=R(t)},l(a){e=T(a,t)},m(a,o){U(a,e,o)},p(a,o){o&1&&t!==(t=a[0]?"Json format (human readable)":"Msgpack format (Future compatible)")&&N(e,t)},d(a){a&&_(e)}}}function j(n){let t,e="Please allow up to 20 seconds for data to download!";return{c(){t=v("p"),t.textContent=e},l(a){t=k(a,"P",{"data-svelte-h":!0}),K(t)!=="svelte-1cyvhk5"&&(t.textContent=e)},m(a,o){U(a,t,o)},d(a){a&&_(t)}}}function H(n){let t,e=n[2].toFixed(1)+"",a,o;return{c(){t=v("p"),a=R(e),o=R("s / 20.0s")},l(r){t=k(r,"P",{});var l=I(t);a=T(l,e),o=T(l,"s / 20.0s"),l.forEach(_)},m(r,l){U(r,t,l),m(t,a),m(t,o)},p(r,l){l&4&&e!==(e=r[2].toFixed(1)+"")&&N(a,e)},d(r){r&&_(t)}}}function ie(n){let t,e,a,o="Save StudentVue data",r,l,p,C,h,$,d,S,g,L,y,b,E,F,z;function G(s){n[4](s)}let A={name:"cookie",active:"bg-gradient-to-r from-secondary-200 to-secondary-700",size:"sm",$$slots:{default:[re]},$$scope:{ctx:n}};n[0]!==void 0&&(A.checked=n[0]),p=new ne({props:A}),X.push(()=>ae(p,"checked",G));let c=!n[1]&&j(),i=!n[1]&&H(n);return b=new se({props:{classes:"select variant-ghost-primary",selected:"caching"}}),{c(){t=v("div"),e=v("div"),a=v("p"),a.textContent=o,r=P(),l=v("label"),O(p.$$.fragment),h=P(),c&&c.c(),$=P(),d=v("button"),S=R("Cache"),L=P(),i&&i.c(),y=P(),O(b.$$.fragment),this.h()},l(s){t=k(s,"DIV",{class:!0});var u=I(t);e=k(u,"DIV",{class:!0});var f=I(e);a=k(f,"P",{class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1smsceg"&&(a.textContent=o),r=x(f),l=k(f,"LABEL",{class:!0});var B=I(l);V(p.$$.fragment,B),B.forEach(_),h=x(f),c&&c.l(f),$=x(f),d=k(f,"BUTTON",{type:!0,class:!0});var M=I(d);S=T(M,"Cache"),M.forEach(_),L=x(f),i&&i.l(f),f.forEach(_),y=x(u),V(b.$$.fragment,u),u.forEach(_),this.h()},h(){w(a,"class","text-3xl"),w(l,"class","flex items-center space-x-2"),w(d,"type","button"),w(d,"class","btn login bg-gradient-to-br variant-gradient-primary-tertiary"),d.disabled=g=!n[1],w(e,"class","card p-4 window text-token space-y-4 text-center"),w(t,"class","container")},m(s,u){U(s,t,u),m(t,e),m(e,a),m(e,r),m(e,l),q(p,l,null),m(e,h),c&&c.m(e,null),m(e,$),m(e,d),m(d,S),m(e,L),i&&i.m(e,null),m(t,y),q(b,t,null),E=!0,F||(z=Y(d,"click",n[3]),F=!0)},p(s,[u]){const f={};u&65&&(f.$$scope={dirty:u,ctx:s}),!C&&u&1&&(C=!0,f.checked=s[0],Z(()=>C=!1)),p.$set(f),s[1]?c&&(c.d(1),c=null):c||(c=j(),c.c(),c.m(e,$)),(!E||u&2&&g!==(g=!s[1]))&&(d.disabled=g),s[1]?i&&(i.d(1),i=null):i?i.p(s,u):(i=H(s),i.c(),i.m(e,null))},i(s){E||(D(p.$$.fragment,s),D(b.$$.fragment,s),E=!0)},o(s){J(p.$$.fragment,s),J(b.$$.fragment,s),E=!1},d(s){s&&_(t),W(p),c&&c.d(),i&&i.d(),W(b),F=!1,z()}}}function ce(n,t,e){const a=oe();let o=!0,r=!0,l=0;async function p(){let h=setInterval(()=>{e(2,l+=.1)},100);e(1,r=!1);const $={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},d=await fetch(`${le}/cache?reusable=${!o}`,$);if(d.status!=200){const y={message:`${await d.text()}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};a.trigger(y),e(1,r=!0),e(2,l=0),clearInterval(h);return}var S=URL.createObjectURL(await d.blob());let g=document.createElement("a");g.href=S,o?g.download="data.zip":g.download="data.mpk",g.innerHTML="Click here to download the file",g.click(),e(1,r=!0),e(2,l=0),clearInterval(h)}function C(h){o=h,e(0,o)}return[o,r,l,p,C]}class be extends ee{constructor(t){super(),te(this,t,ce,ie,Q,{})}}export{be as component};
