import{s as A,e as g,q as x,t as T,c as v,a as S,r as D,u as C,v as j,d as b,b as P,i as R,g as d,w as B,x as F}from"../chunks/scheduler.BuSmsJtx.js";import{S as V,i as W,c as H,a as K,m as M,t as N,b as G,d as J}from"../chunks/index.DA3bgLBr.js";import{P as Q}from"../chunks/pageSelector.WLEOu5bP.js";import{W as X}from"../chunks/main.D8RZwWgc.js";import{g as Y}from"../chunks/stores.BNqaqb8G.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CJXNOwyF.js";function q(_){let e,t="Please allow up to 10 seconds for data to download!",l,c,r=_[0].toFixed(1)+"",n,m;return{c(){e=g("p"),e.textContent=t,l=x(),c=g("p"),n=T(r),m=T("s / 10.0s")},l(o){e=v(o,"P",{"data-svelte-h":!0}),D(e)!=="svelte-nf1aa6"&&(e.textContent=t),l=C(o),c=v(o,"P",{});var a=S(c);n=j(a,r),m=j(a,"s / 10.0s"),a.forEach(b)},m(o,a){R(o,e,a),R(o,l,a),R(o,c,a),d(c,n),d(c,m)},p(o,a){a&1&&r!==(r=o[0].toFixed(1)+"")&&F(n,r)},d(o){o&&(b(e),b(l),b(c))}}}function Z(_){let e,t,l,c="Download all data (sans documents)",r,n,m="If you would like to download all of your student data in the readable json format, download them here!",o,a,E="Please extract zip file, or some folders may not show up",h,f,y,I,U,$,w,k,L,z,s=!_[1]&&q(_);return w=new Q({props:{classes:"select variant-ghost-primary",selected:"download data"}}),{c(){e=g("div"),t=g("div"),l=g("p"),l.textContent=c,r=x(),n=g("p"),n.textContent=m,o=x(),a=g("p"),a.textContent=E,h=x(),f=g("button"),y=T("Download"),U=x(),s&&s.c(),$=x(),H(w.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var p=S(e);t=v(p,"DIV",{class:!0});var u=S(t);l=v(u,"P",{class:!0,"data-svelte-h":!0}),D(l)!=="svelte-5dutn9"&&(l.textContent=c),r=C(u),n=v(u,"P",{"data-svelte-h":!0}),D(n)!=="svelte-1m23a19"&&(n.textContent=m),o=C(u),a=v(u,"P",{"data-svelte-h":!0}),D(a)!=="svelte-1j204i6"&&(a.textContent=E),h=C(u),f=v(u,"BUTTON",{type:!0,class:!0});var O=S(f);y=j(O,"Download"),O.forEach(b),U=C(u),s&&s.l(u),u.forEach(b),$=C(p),K(w.$$.fragment,p),p.forEach(b),this.h()},h(){P(l,"class","text-3xl"),P(f,"type","button"),P(f,"class","btn login bg-gradient-to-br variant-gradient-primary-tertiary"),f.disabled=I=!_[1],P(t,"class","card p-4 text-token space-y-4 text-center max-w-4/5 w-4/5 md:1/3 lg:w-1/4 mt-10"),P(e,"class","container")},m(i,p){R(i,e,p),d(e,t),d(t,l),d(t,r),d(t,n),d(t,o),d(t,a),d(t,h),d(t,f),d(f,y),d(t,U),s&&s.m(t,null),d(e,$),M(w,e,null),k=!0,L||(z=B(f,"click",_[2]),L=!0)},p(i,[p]){(!k||p&2&&I!==(I=!i[1]))&&(f.disabled=I),i[1]?s&&(s.d(1),s=null):s?s.p(i,p):(s=q(i),s.c(),s.m(t,null))},i(i){k||(N(w.$$.fragment,i),k=!0)},o(i){G(w.$$.fragment,i),k=!1},d(i){i&&b(e),s&&s.d(),J(w),L=!1,z()}}}function tt(_,e,t){const l=Y();async function c(){let m=setInterval(()=>{t(0,r+=.1)},100);t(1,n=!1);const o={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},a=await fetch(`${X}/cache`,o);if(a.status!=200){const y={message:`${await a.text()}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};l.trigger(y),t(1,n=!0),t(0,r=0),clearInterval(m);return}var E=URL.createObjectURL(await a.blob());let h=document.createElement("a");h.href=E,h.download="my_student_info_2025.zip",h.innerHTML="Click here to download the file",h.click(),t(1,n=!0),t(0,r=0),clearInterval(m)}let r=0,n=!0;return[r,n,c]}class rt extends V{constructor(e){super(),W(this,e,tt,Z,A,{})}}export{rt as component};
