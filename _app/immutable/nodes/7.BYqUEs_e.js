import{s as A,e as v,l as y,t as U,c as b,a as I,k as P,m as C,p as L,d as _,b as w,i as S,g as d,q as B,n as O,r as F}from"../chunks/scheduler.BhNCGW4c.js";import{S as N,i as V}from"../chunks/index.By4zub_x.js";import{W}from"../chunks/main.DlQOQXQP.js";import{g as j}from"../chunks/stores.Bs2cUqnn.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BXlGj4x9.js";function q(m){let a,t="Please allow up to 20 seconds for data to download!",s,i,r=m[0].toFixed(1)+"",l,p;return{c(){a=v("p"),a.textContent=t,s=y(),i=v("p"),l=U(r),p=U("s / 20.0s")},l(o){a=b(o,"P",{"data-svelte-h":!0}),P(a)!=="svelte-1cyvhk5"&&(a.textContent=t),s=C(o),i=b(o,"P",{});var e=I(i);l=L(e,r),p=L(e,"s / 20.0s"),e.forEach(_)},m(o,e){S(o,a,e),S(o,s,e),S(o,i,e),d(i,l),d(i,p)},p(o,e){e&1&&r!==(r=o[0].toFixed(1)+"")&&F(l,r)},d(o){o&&(_(a),_(s),_(i))}}}function H(m){let a,t,s,i="Download all documents",r,l,p=`Starting November 20, 2024, Synergy will start deleting old interim\r
      progess reports (before 2022-2023 syr).`,o,e,k="If you want to save these documents, download them in bulk here!",h,c,x,E,D,R,T,n=!m[1]&&q(m);return{c(){a=v("div"),t=v("div"),s=v("p"),s.textContent=i,r=y(),l=v("p"),l.textContent=p,o=y(),e=v("p"),e.textContent=k,h=y(),c=v("button"),x=U("Download"),D=y(),n&&n.c(),this.h()},l(u){a=b(u,"DIV",{class:!0});var g=I(a);t=b(g,"DIV",{class:!0});var f=I(t);s=b(f,"P",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1x5h7br"&&(s.textContent=i),r=C(f),l=b(f,"P",{"data-svelte-h":!0}),P(l)!=="svelte-zy6d3y"&&(l.textContent=p),o=C(f),e=b(f,"P",{"data-svelte-h":!0}),P(e)!=="svelte-13cuo7f"&&(e.textContent=k),h=C(f),c=b(f,"BUTTON",{type:!0,class:!0});var z=I(c);x=L(z,"Download"),z.forEach(_),D=C(f),n&&n.l(f),f.forEach(_),g.forEach(_),this.h()},h(){w(s,"class","text-3xl"),w(c,"type","button"),w(c,"class","btn login bg-gradient-to-br variant-gradient-primary-tertiary"),c.disabled=E=!m[1],w(t,"class","card p-4 text-token space-y-4 text-center max-w-4/5 w-4/5 md:1/3 lg:w-1/4 mt-10"),w(a,"class","container")},m(u,g){S(u,a,g),d(a,t),d(t,s),d(t,r),d(t,l),d(t,o),d(t,e),d(t,h),d(t,c),d(c,x),d(t,D),n&&n.m(t,null),R||(T=B(c,"click",m[2]),R=!0)},p(u,[g]){g&2&&E!==(E=!u[1])&&(c.disabled=E),u[1]?n&&(n.d(1),n=null):n?n.p(u,g):(n=q(u),n.c(),n.m(t,null))},i:O,o:O,d(u){u&&_(a),n&&n.d(),R=!1,T()}}}function K(m,a,t){const s=j();async function i(){let p=setInterval(()=>{t(0,r+=.1)},100);t(1,l=!1);const o={headers:{"Accept-Encoding":"br",Authorization:`Bearer ${sessionStorage.getItem("token")}`}},e=await fetch(`${W}/cache`,o);if(e.status!=200){const x={message:`${await e.text()}`,background:"variant-filled-error bg-gradient-to-r from-error-400 to-error-600",timeout:3e3};s.trigger(x),t(1,l=!0),t(0,r=0),clearInterval(p);return}var k=URL.createObjectURL(await e.blob());let h=document.createElement("a");h.href=k,h.download="documents.zip",h.innerHTML="Click here to download the file",h.click(),t(1,l=!0),t(0,r=0),clearInterval(p)}let r=0,l=!0;return[r,l,i]}class Y extends N{constructor(a){super(),V(this,a,K,H,A,{})}}export{Y as component};
